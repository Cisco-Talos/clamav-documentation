<!DOCTYPE HTML>
<html lang="en" class="clamav sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Upgrading - ClamAV Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="An open source malware detection toolkit and antivirus engine.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "clamav";
            const default_dark_theme = "clamav";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('clamav')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="clamav">Dark</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="clamav_light">Light</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ClamAV Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="upgrading-clamav"><a class="header" href="#upgrading-clamav">Upgrading ClamAV</a></h1>
<h2 id="clamav-from-packages"><a class="header" href="#clamav-from-packages">ClamAV from Packages</a></h2>
<p>If you installed from a package, we suggest you find the approved package from your distro provider and install that. The ClamAV team does not maintain individual packages for every distribution build.
If there are no new packages, you have three options:</p>
<ul>
<li>Wait</li>
<li>Build ClamAV Package</li>
<li>Install ClamAV From Source</li>
</ul>
<h2 id="install-clamav-from-source"><a class="header" href="#install-clamav-from-source">Install ClamAV From Source</a></h2>
<p>If you installed from sources, first <a href="faq-uninstall.html">uninstall the old version</a>.</p>
<p>Then, <a href="../manual/Installing/Installing-from-source-Unix.html">compile and install the new one</a>.</p>
<p>Depending on your installation method, you might want to backup configuration (located in <code>/usr/local/etc</code> by default) and signature database (located in <code>/usr/local/share/clamav</code> by default). Don't forget to restore backups before starting up updated ClamAV.</p>
<p>Backup your database signature (located in <code>/usr/local/share/clamav</code> by default) before upgrading to newer ClamAV version. Restore the backed up database signature before running the updated version. This is to avoid getting the <code>/usr/local/share/clamav not locked</code> error message when doing <code>freshclam</code>.</p>
<h2 id="webmin-and-yum"><a class="header" href="#webmin-and-yum">Webmin and Yum</a></h2>
<p>To obtain a new version:</p>
<pre><code class="language-bash">yum list clamav

yum update clamav
</code></pre>
<p>If everything updated properly, run <code>freshclam</code> to update your signature database.</p>
<h3 id="what-does-warning-current-functionality-level--1-required--2-mean"><a class="header" href="#what-does-warning-current-functionality-level--1-required--2-mean">What does "<em>WARNING:	Current functionality level = 1, required = 2</em>" mean?</a></h3>
<p>The <em>functionality level</em> of the database determines which scanner engine version is required to use all of its signatures. If you don't upgrade immediately you will be missing the latest viruses.</p>
<h3 id="what-does-your-clamav-installation-is-outdated-mean"><a class="header" href="#what-does-your-clamav-installation-is-outdated-mean">What does "<em>Your ClamAV installation is OUTDATED</em>" mean?</a></h3>
<p>You'll get this message whenever a new version of ClamAV is released. In order to detect all the latest viruses, it's not enough to keep your database up to date. You also need to run the latest version of the scanner. You can download the <a href="https://github.com/Cisco-Talos/clamav">sources</a> of the latest release from our website. If you are afraid to break something while upgrading, use  the <a href="http://www.clamav.net/download.html#otherversions">pre-compiled packages</a> for your operating system/distribution. Remember: running the latest stable release also improves stability.</p>
<h3 id="i-upgraded-to-the-latest-stable-version-but-i-still-get-the-message-your-clamav-installation-is-outdated-why"><a class="header" href="#i-upgraded-to-the-latest-stable-version-but-i-still-get-the-message-your-clamav-installation-is-outdated-why">I upgraded to the latest stable version but I still get the message "<em>Your ClamAV installation is OUTDATED</em>", why?</a></h3>
<p>Make sure there is really only one version of ClamAV installed on your system:</p>
<pre><code class="language-bash">whereis freshclam

whereis clamscan
</code></pre>
<p>Also make sure that you haven't got old libraries (<code>libclamav.so*</code>) lying around your filesystem. You can verify it using:</p>
<pre><code class="language-bash">ldd $(which freshclam)
</code></pre>
<h3 id="what-does-malformed-hexstring-this-clamav-version-has-reached-end-of-life-mean"><a class="header" href="#what-does-malformed-hexstring-this-clamav-version-has-reached-end-of-life-mean">What does "<em>Malformed hexstring: This ClamAV version has reached End of Life</em>" mean?</a></h3>
<p>Please refer to our <a href="faq-eol.html">End-of-Life (EOL) policy</a>.</p>
<h3 id="how-do-i-verify-the-integrity-of-clamav-sources"><a class="header" href="#how-do-i-verify-the-integrity-of-clamav-sources">How do I verify the integrity of ClamAV sources?</a></h3>
<p>You can verify the authenticity of ClamAV release packages provided <a href="https://www.clamav.net/downloads">on the ClamAV downloads page</a> using <a href="http://www.gnupg.org/">GnuPG</a>.</p>
<ol>
<li>Install GnuPG.</li>
<li>Download the <a href="https://raw.githubusercontent.com/Cisco-Talos/clamav-documentation/main/src/manual/cisco-talos.gpg">Cisco Talos GPG public key</a>.</li>
<li>Import the key into your local public keyring:
<pre><code class="language-bash">gpg --import cisco-talos.gpg
</code></pre>
</li>
<li>Download the ClamAV package AND the corresponding <code>.sig</code> file to the same directory.</li>
<li>Verify that the stable release download is signed with the [Cisco Talos GPG public key]:
<pre><code class="language-bash">gpg --verify clamav-X.XX.tar.gz.sig
</code></pre>
</li>
</ol>
<p>The resulting output should look something like this. The specific details will differ, as we rotate the GPG key every couple of years:</p>
<pre><code class="language-bash">    gpg: Signature made Wed Jan 24 19:31:26 2018 EST
    gpg:                using RSA key F13F9E16BCA5BFAD
    gpg: Good signature from "Talos (Talos, Cisco Systems Inc.) [email address]" [unknown]
</code></pre>
<h3 id="where-can-i-get-the-latest-release-beta-or-release-candidate-of-clamav"><a class="header" href="#where-can-i-get-the-latest-release-beta-or-release-candidate-of-clamav">Where can I get the latest release, beta, or release candidate of ClamAV?</a></h3>
<p>Visit the <a href="http://www.clamav.net/downloads">source download page</a>.</p>
<h3 id="is-my-compilerhardwareoperating-system-supported-by-clamav"><a class="header" href="#is-my-compilerhardwareoperating-system-supported-by-clamav">Is my compiler/hardware/operating system supported by ClamAV?</a></h3>
<p>ClamAV supports a wide variety of compilers, hardware and operating systems. Our core compiler is GCC with Linux on 32 and 64 bit Intel platforms, LLVM/Clang on macOS, and MSVC on Windows.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../faq/faq-scan-alerts.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../faq/faq-rust.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../faq/faq-scan-alerts.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../faq/faq-rust.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
